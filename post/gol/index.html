<!doctype html><html lang=en><head><link rel=canonical href=https://nafaaal.github.io><meta name=description content="Nafaal's blog"><title>Conways Game of Life Simulation ::
Nafaal's Blog</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="What is Life? # The Game of Life is a cellular automaton devised by the British mathematician John Horton Conway in 1970. It is somehow a game, where you can only get to set the starting life/board of the game. I personally prefer calling this a simulation for this reason.
This simulation runs on a (infinite) 2D grid of cells where the life of the next generation is determined by applying a set of rules on the current generation."><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://nafaaal.github.io><link rel=stylesheet href=/assets/style.css><link rel=stylesheet href=/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/img/favicon.png><link href=/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="Conways Game of Life Simulation"><meta name=twitter:description content="Implementation of Game of Life Simulation using Golang for my Computer Systems A module at the University of Bristol"><meta property="og:title" content="Conways Game of Life Simulation"><meta property="og:description" content="Implementation of Game of Life Simulation using Golang for my Computer Systems A module at the University of Bristol"><meta property="og:type" content="article"><meta property="og:url" content="/post/gol/"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-03-07T00:00:00+00:00"><meta property="article:modified_time" content="2022-03-07T00:00:00+00:00"><meta property="og:site_name" content="Nafaal's Blog"></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>nafaal.com</span>
<span class=logo__cursor></span></a>
<span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/cv>cv</a></li><li><a href=/archive>posts</a></li><li><a href=/about>whoami</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/cv>cv</a></li><li><a href=/archive>posts</a></li><li><a href=/about>whoami</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h1 class=post-title>Conways Game of Life Simulation</h1><div class=post-meta><span class=post-date>2022-03-07</span>
<span class=post-read-time>— 3 min read</span></div><figure class=post-cover><img width=775 src=/img/1200x600_Life.jpg alt="Conways Game of Life Simulation"></figure><div class=post-content><h3 id=what-is-life>What is Life?
<a href=#what-is-life class=h-anchor aria-hidden=true>#</a></h3><p>The Game of Life is a cellular automaton devised by the British mathematician John Horton Conway in 1970. It is somehow a game, where you can only get to set the starting life/board of the game. I personally prefer calling this a simulation for this reason.</p><p>This simulation runs on a (infinite) 2D grid of cells where the life of the next generation is determined by applying a set of rules on the current generation.</p><p> </p><h3 id=the-rules-are-best-summarised-as>The rules are best summarised as:
<a href=#the-rules-are-best-summarised-as class=h-anchor aria-hidden=true>#</a></h3><ol><li><p>Any live cell with two or three live neighbours survives.</p></li><li><p>Any dead cell with three live neighbours becomes a live cell.</p></li><li><p>All other live cells die in the next generation. Similarly, all other dead cells stay dead.</p></li></ol><p> </p><p>This ruleset for the next generation is implement by the function</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// golang
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>calculateNextState</span>(<span style=color:#a6e22e>p</span> <span style=color:#a6e22e>Params</span>, <span style=color:#a6e22e>world</span> [][]<span style=color:#66d9ef>byte</span>) [][]<span style=color:#66d9ef>byte</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>newWorld</span> <span style=color:#f92672>:=</span> make([][]<span style=color:#66d9ef>byte</span>, <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>ImageHeight</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>newWorld</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>newWorld</span>[<span style=color:#a6e22e>i</span>] = make([]<span style=color:#66d9ef>byte</span>, <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>ImageWidth</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>col</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>col</span> &lt; <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>ImageHeight</span>; <span style=color:#a6e22e>col</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>row</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>row</span> &lt; <span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>ImageWidth</span>; <span style=color:#a6e22e>row</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>n</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>neighbours</span>(<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>ImageWidth</span>, <span style=color:#a6e22e>col</span> , <span style=color:#a6e22e>row</span> , <span style=color:#a6e22e>world</span>)
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>world</span>[<span style=color:#a6e22e>col</span>][<span style=color:#a6e22e>row</span>] <span style=color:#f92672>==</span> <span style=color:#ae81ff>255</span> {
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>n</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>n</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>3</span> {
</span></span><span style=display:flex><span>					<span style=color:#a6e22e>newWorld</span>[<span style=color:#a6e22e>col</span>][<span style=color:#a6e22e>row</span>] = <span style=color:#ae81ff>255</span>
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>n</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>3</span> {
</span></span><span style=display:flex><span>					<span style=color:#a6e22e>newWorld</span>[<span style=color:#a6e22e>col</span>][<span style=color:#a6e22e>row</span>] = <span style=color:#ae81ff>255</span>
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>newWorld</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p> </p><p>Where the neighbours function return the number of alive cells/pixels directly adjacent to it
 </p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>neighbours</span>(<span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>x</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>world</span> [][]<span style=color:#66d9ef>uint8</span>) <span style=color:#66d9ef>int</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>height</span> <span style=color:#f92672>:=</span> len(<span style=color:#a6e22e>world</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>neighbours</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>				<span style=color:#a6e22e>h</span> <span style=color:#f92672>:=</span> (<span style=color:#a6e22e>y</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>height</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>i</span>) <span style=color:#f92672>%</span> <span style=color:#a6e22e>height</span>
</span></span><span style=display:flex><span>				<span style=color:#a6e22e>w</span> <span style=color:#f92672>:=</span> (<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>width</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>j</span>) <span style=color:#f92672>%</span> <span style=color:#a6e22e>width</span>
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>world</span>[<span style=color:#a6e22e>h</span>][<span style=color:#a6e22e>w</span>] <span style=color:#f92672>==</span> <span style=color:#ae81ff>255</span> {
</span></span><span style=display:flex><span>					<span style=color:#a6e22e>neighbours</span><span style=color:#f92672>++</span>
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>neighbours</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p> </p><p>The resulting simulation looks like this</p><p><img src=/img/gol_new.gif alt="GOL Simulation"></p><p> </p><p>This set of rules may seem very simple and mundane, however it brings life to very many cool and interesting patterns.</p><p>One of my favourite patterns is this little guy, who just travels across the board. This simulation is called a glider.</p><p><img src=/img/gol_glider.gif alt=Glider></p><p> </p><h3 id=further-optimizations-and-approaches>Further Optimizations and Approaches
<a href=#further-optimizations-and-approaches class=h-anchor aria-hidden=true>#</a></h3><hr><ol><li>Parallelising.</li></ol><p>As you may have thought, doing the simulation over a bigger area would become slow and unusable as we have one thread working to compute everything.</p><p>We can use multiple threads to parrallelize and make the simulation compute faster.</p><p>We would just need to split the world and pass it onto different threads to compute the result quicker.</p><p>The implementation for this can be found <a href=https://github.com/nafaaal/parallel_gol_coursework>here</a></p><hr><ol start=2><li>Distribution.</li></ol><p>For some weird reason we might not want to compute this locally, and in that case we can use remote procedure calls to servers to do the hard work for us and give us back the result.</p><p>This distributed method can also scale like the other parallel method, by sending computation over to multiple servers.</p><p>However the network latency to send and recieve large arrays seems to be the bigger bottleneck in this approach</p><p>The code for this implementation can be found <a href=https://github.com/nafaaal/distributed_gol_coursework>here</a></p><hr><p> </p><blockquote><p>You may have wondered what the banner image was about. Sorry about the quality, it was my 2 minute attempt of writing &ldquo;Life&rdquo; using Conways Script, which is an alphabet inspired by this simulation. More information about it linked <a href=https://omniglot.com/conscripts/conway.htm>here</a></p></blockquote></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button next"><a href=/post/yard/><span class=button__text>Scotland Yard</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" width="44" height="44" viewBox="0 0 44 44"><polyline fill="none" stroke="#000" stroke-width="2" points="15 8 29.729 22.382 15 35.367"/></svg></span><span class=logo__text>nafaal.com</span>
<span class=logo__cursor></span></a><div class="footer__inner footer__inner--small m-t-5"><div class=copyright><span><a target=_blank href=https://twitter.com/nafaaal>Twitter</a></span>
<span><a target=_blank href=https://www.linkedin.com/in/nafaaal/>Linkedin</a></span>
<span><a target=_blank href=https://github.com/nafaaal>Github</a></span>
<span><a href=/credit/>Credits</a></span></div></div></div></footer><script src=/assets/main.js></script>
<script src=/assets/prism.js></script></div></body></html>